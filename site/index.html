<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8"/>
	<title>Gestion champs</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="robots" content="noindex, nofollow"/>
	<meta name="color-scheme" content="light dark"/>
	<meta name="theme-color" content="#fbfbfc" media="(prefers-color-scheme: light)"/>
	<meta name="theme-color" content="#080809" media="(prefers-color-scheme: dark)"/>
	<link rel="icon" type="image/webp" href="img/favicon.webp"/>
	<meta name="description" content="Gestion de champs"/>
	<link rel="stylesheet" type="text/css" href="style/index.css"/>
</head>
<body>
<header>
	<img draggable=false src="img/logoAlsagriculture.png" alt="Logo Als'agriculture"/>
	<section>
		<p>Nom du champ</p>
		<div class="dropdown" id="ddChamp">
			<button class="dropbtn">⇩</button>
			<div id="selectChamp" class="dropdown-content">
				<button value="1">Champ 1</button>
				<button value="2">Champ 2</button>
				<button value="3">Champ 3</button>
			</div>
		</div>
	</section>
	<section>
		<p>Nom utilisateur</p>
		<div class="dropdown" id="ddCmpt">
			<button class="dropbtn">⇩</button>
			<div id="selectCmpt" class="dropdown-content">
				<a href="gestionCmpt.html">Paramètres</a>
				<button value="deco">Déconnexion</button>
			</div>
		</div>
	</section>
</header>
<div id="corps">
	<section id="secInfos">
		<div>
			<h1>État général</h1>
			<p>OK</p>
		</div>
		<div>
			<h1>Nombre de capteurs</h1>
			<p>42</p>
		</div>
		<div>
			<h1>Dernière màj</h1>
			<p>24/10/2023 16:30</p>
		</div>
	</section>

	<section id="compMetMoy">
		<section id="secMeteo">
			<div>
				<div class="colonne titre">
					<p>
						Date
					</p>
					<div class="dropdown" id="ddDuree">
						<button class="dropbtn">⇩</button>
						<div id="selectDuree" class="dropdown-content">
							<button value="semaine">Semaine</button>
							<button value="jour">Journée</button>
						</div>
					</div>
				</div>
				<div class="colonne titre">Temp. max (°C)</div>
				<div class="colonne titre">Temp. min (°C)</div>
				<div class="colonne titre">Temp. (°C)</div>
				<div class="colonne titre">Humi. (%)</div>
				<div class="colonne titre">Précip. (mm/m²)</div>
				<div class="colonne titre">Type précip.</div>
				<div class="colonne titre">Dir. vent (°)</div>
				<div class="colonne titre">Couv. nua. (%)</div>
				<div class="colonne titre">UV</div>
				<div class="colonne titre">Vit. vent (km/h)</div>
			</div>
		</section>
		<section id="secMoyennes">
			<div>
				<h1>Température moyenne</h1>
				<p>21.3°C</p>
			</div>
			<div>
				<h1>Humidité moyenne du sol</h1>
				<p>60%</p>
			</div>
			<div>
				<h1>Luminosité moyenne</h1>
				<p>13 000 lux</p>
			</div>
		</section>
	</section>

	<section id="secGraph">
		<div id="optGraph">
			<div>
				<p>Type de données</p>
				<div class="dropdown" id="ddType">
					<button class="dropbtn">⇩</button>
					<div id="selectType" class="dropdown-content">
						<button value="temp">Température</button>
						<button value="humi">Humidité du sol</button>
						<button value="lumi">Luminosité</button>
					</div>
				</div>
			</div>
			<div>
				<p>Ilot</p>
				<div class="dropdown" id="ddIlot">
					<button class="dropbtn">⇩</button>
					<div id="selectIlot" class="dropdown-content">
						<button value="1">Ilot 1</button>
						<button value="2">Ilot 2</button>
						<button value="3">Ilot 3</button>
					</div>
				</div>
			</div>
		</div>
		<div id="graph">
		</div>
	</section>

	<section id="secTableau">
		<div>
			<div class="colonne titre">ID</div>
			<div class="colonne titre">Ilot</div>
			<div class="colonne titre">Date</div>
			<div class="colonne titre">Heure</div>
			<div class="colonne titre">Température (°C)</div>
			<div class="colonne titre">Humidité du sol (%)</div>
			<div class="colonne titre">Luminosité (lux)</div>

			<div class="colonne">1</div>
			<div class="colonne">12</div>
			<div class="colonne">2023-10-25</div>
			<div class="colonne">09:30</div>
			<div class="colonne">23.7</div>
			<div class="colonne">47.8</div>
			<div class="colonne">12 376</div>

			<div class="colonne">2</div>
			<div class="colonne">12</div>
			<div class="colonne">2023-10-25</div>
			<div class="colonne">09:30</div>
			<div class="colonne">23.7</div>
			<div class="colonne">47.8</div>
			<div class="colonne">12 376</div>

			<div class="colonne">3</div>
			<div class="colonne">12</div>
			<div class="colonne">2023-10-25</div>
			<div class="colonne">09:30</div>
			<div class="colonne">23.7</div>
			<div class="colonne">47.8</div>
			<div class="colonne">12 376</div>
		</div>
	</section>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly-basic.min.js"
integrity="sha512-TiY/d3GpuSKgQYgnqegSfdqlXp6ebBvi6A47mFTMSpZM7BMbvfkkvU/SlDzZHs9lWqF+BteevHlqgauHhLLbIA=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly-locale-fr.min.js"
integrity="sha512-nyAFXuhmcYPFCAawwaZOW22viMZW5Aw1jB7w84GbnbPqIz1SDHWGdQw17DB2BfU1jv4nnEdJgvolNINTjdSKMA=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="scripts/interactions.js"></script>
<script src="scripts/recupDonnees.js"></script>
<script src="scripts/afficherDonnees.js"></script>
<script src="scripts/classesCouleurs.js"></script>
<script src="scripts/graphique.js"></script>
<script>
	/*
	* Tableau de tableau contenant les ID des containers des dropdowns et les ID
	* des boutons à ajouter quand ils sont sélectionnés
	*/
	const contIdButtons = [
		["selectChamp", "champSlct", true], ["selectCmpt", "cmptSlct", false],
		["selectType", "typeSlct", true], ["selectIlot", "ilotSlct", true],
		["selectDuree", "dureeSlct", true]
	];

	// Activer les boutons des dropdowns
	contIdButtons.forEach(element => {
		activerBouton(element[0], element[1], element[2]);
	});

	// Afficher les données météo
	afficherMeteo(document.getElementById("dureeSlct").value);

	// Bouton pour changer la temporalité de la météo
	let dropdownDuree = document.getElementById("ddDuree");
	dropdownDuree.addEventListener("click", _ => {
		const valChamp = document.getElementById("dureeSlct").value;
		afficherMeteo(valChamp);
	});

	// // Afficher les données du graphique
	// console.log(afficherGraphique(1, 1, 1, "temp"));
	// window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",
	// () => {
	// 	// Récupère les couleurs en fonction du thème
	// 	let couleursGraph =
	// 		(window.matchMedia("(prefers-color-scheme: light)").matches) ?
	// 		new CouleursClaires() : new CouleursSombres();
	// 	let [bgColor, gridColor, fontColor, lineColor, fillColor] =
	// 		couleursGraph.getCouleursTableau();

	// 	// Configure le placement du graphique, les ticks et les labels
	// 	let [top, right, bottom, left, nTicks, tickAngle, formatMois] =
	// 		[10, 10, 40, 55, 8, 0, "%B"];

	// 	// Adapate le graphique en fonction de la taille de l'écran
	// 	if (window.matchMedia("(max-width: 769px)").matches) {
	// 		rangeMin = abscisse[abscisse.length - (7 * 24) - 1];
	// 		[top, right, bottom, left, nTicks, tickAngle, formatMois] =
	// 			[0, 7, 70, 23, 6, -70, "%b"];
	// 	}

	// 	// Configure le style
	// 	const layout = {
	// 		showlegend: false,
	// 		separators: ".,",
	// 		plot_bgcolor: bgColor,
	// 		paper_bgcolor: bgColor,
	// 		margin: {
	// 			t: top,
	// 			r: right,
	// 			b: bottom,
	// 			l: left,
	// 			pad: 4
	// 		},
	// 		font: {
	// 			family: "Open Sans",
	// 			color: fontColor
	// 		},
	// 		xaxis: {
	// 			showgrid: false,
	// 			nticks: nTicks,
	// 			tickangle: tickAngle,
	// 			range: [rangeMin, rangeMax],
	// 			tickformatstops: [
	// 				{
	// 					"dtickrange": [null, 60000],
	// 					"value": "%-d " + formatMois + "<br>%Hh%M.%S"
	// 				},
	// 				{
	// 					"dtickrange": [60000, 3600000],
	// 					"value": "%-d " + formatMois + "<br>%Hh%M"
	// 				},
	// 				{
	// 					"dtickrange": [3600000, 86400000],
	// 					"value": "%-d " + formatMois + "<br>%Hh%M"
	// 				},
	// 				{
	// 					"dtickrange": [86400000, null],
	// 					"value": "%-d " + formatMois
	// 				}
	// 			]
	// 		},
	// 		yaxis: {
	// 			gridcolor: gridColor,
	// 			gridcolorwidth: 1,
	// 			range: [minOrd, maxOrd],
	// 			nticks: nTicks,
	// 			tickangle: tickAngle,
	// 			zeroline: false,
	// 			fixedrange: true,
	// 			tickformat: ".1f",
	// 		}
	// 	}

	// 	Plotly.relayout("graph", layout);
	// });
	// window.matchMedia("(max-width: 769px)").addEventListener("change",
	// () => {
	// 	afficherGraphique(1, 1, 1, "temp");
	// });
</script>
</body>
</html>